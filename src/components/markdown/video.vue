<template>
    <div class="c-editor-markdown-dialog">
        <span class="c-markdown-toolbar-video c-markdown-toolbar-item" @click="handleClick" title="æ’å…¥è§†é¢‘">
            <i class="el-icon-video-camera"></i>
        </span>

        <el-dialog :visible.sync="visible" title="æ’å…¥è§†é¢‘" :modal-append-to-body="false">
            <a class="u-help" href="/tool/686/" target="_blank">ğŸ’™ ç‚¹å‡»æŸ¥çœ‹å¦‚ä½•è·å–è§†é¢‘åœ°å€</a>

            <el-input class="u-input" placeholder="è¯·è¾“å…¥BVå·" v-model="videoUrl"></el-input>

            <div slot="footer">
                <el-button @click="cancel">å–æ¶ˆ</el-button>
                <el-button type="primary" @click="insert">æ’å…¥</el-button>
            </div>
        </el-dialog>
    </div>
</template>

<script>
export default {
    name: "markdown_video",
    data() {
        return {
            visible: false,
            videoUrl: "",
        };
    },
    methods: {
        handleClick() {
            this.visible = true;
        },
        cancel() {
            this.visible = false;
            this.videoUrl = "";
        },
        insert() {
            const content = `<iframe class="w-player-bilibili" src="//player.bilibili.com/player.html?bvid=${this.videoUrl}" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="400" height="300"> </iframe>`;

            this.$emit("insert", content);


            this.videoUrl = "";

            this.visible = false;
        },
    },
};
</script>

